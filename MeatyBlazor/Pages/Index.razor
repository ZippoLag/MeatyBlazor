@page "/"

<h1>Hello, world!</h1>

<button @onclick="addCounter" class="add-counter">+</button>

<ul class="counter-list">
	@for(int index=0; index<counters.Count(); index++)
	{
		var enclosedIndex = index;

		<li><Counter Count="@counters[index]" CountChanged="@((newCount) => counterCountChangedHandler(enclosedIndex, newCount))" /></li>
	}
</ul>

@code
{
	private List<int> counters = new();

	private void addCounter()
	{
		counters.Add(0);
	}

	private void counterCountChangedHandler(int index, int newCount)
	{
		counters[index] = newCount;
	}
}


<style>
	li {
		margin-bottom: 1em;
	}
</style>